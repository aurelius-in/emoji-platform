<!DOCTYPE html>
<html>
<head>
  <title>Emoji Platformer</title>
  <style>
    body {
      margin: 0;
      padding: 0;
    }
    canvas {
      border: 4px solid black;
    }
  </style>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <script>
    // Lock screen to landscape mode
    screen.orientation.lock('landscape');
  </script>
</head>
<body>
  <canvas id="gameCanvas" width="3200" height="1200"></canvas>
  <script>
    var canvas = document.getElementById("gameCanvas");
    var ctx = canvas.getContext("2d");

    var gameState = 'selectCharacter';
    var playerEmoji = null;

    var player = {
      x: 50,
      y: 500,
      width: 50,
      height: 50,
      vy: 0,
      gravity: 0.5,
      jump: -10,
      grounded: false
    };

    var platforms = [
      { x: 0, y: 550, width: 800, height: 10 }, // Platform under player spawn
      { x: 200, y: 250, width: 100, height: 10 },
      { x: 400, y: 450, width: 100, height: 10 },
      // Add more platforms as needed
    ];

    var enemies = [
      { x: 310, y: 100, emoji: "üêí" },
      { x: 510, y: 150, emoji: "üêà" },
      // Add more enemies as needed
    ];

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      if (gameState === 'selectCharacter') {
        ctx.font = "100px Arial";
        ctx.fillText("üíÉ", 200, 300);
        ctx.fillText("or", 400, 300);
        ctx.fillText("üï∫", 600, 300);
      } else {
        // Draw player
        ctx.font = "200px Arial";
        ctx.fillText(playerEmoji, player.x, player.y);

        // Draw platforms
        ctx.fillStyle = "#8B4513";
        platforms.forEach(function(platform) {
          ctx.fillRect(platform.x, platform.y, platform.width, platform.height);
        });

        // Draw enemies
        ctx.font = "75px Arial";
        enemies.forEach(function(enemy) {
          ctx.fillText(enemy.emoji, enemy.x, enemy.y);
        });
      }
    }

    function update() {
      if (gameState !== 'selectCharacter') {
        // Gravity
        player.y += player.vy;
        player.vy += player.gravity;
        player.grounded = false;

        // Collision with platforms
        platforms.forEach(function(platform) {
          if (player.x < platform.x + platform.width &&
              player.x + player.width > platform.x &&
              player.y < platform.y + platform.height &&
              player.y + player.height > platform.y) {
            player.y = platform.y - player.height;
            player.vy = 0;
            player.grounded = true;
          }
        });
      }
    }

    canvas.addEventListener("touchstart", function(e) {
      e.preventDefault();
      var touch = e.touches[0];
      if (gameState === 'selectCharacter') {
        if (touch.clientX >= 200 && touch.clientX <= 300 && touch.clientY >= 200 && touch.clientY <= 300) {
          ctx.strokeRect(190, 200, 120, 120);
          setTimeout(() => {
            playerEmoji = 'üíÉ';
            gameState = 'play';
          }, 500);
        } else if (touch.clientX >= 600 && touch.clientX <= 700 && touch.clientY >= 200 && touch.clientY <= 300) {
          ctx.strokeRect(590, 200, 120, 120);
          setTimeout(() => {
            playerEmoji = 'üï∫';
            gameState = 'play';
          }, 500);
        }
      } else {
        // Game touch logic for jumping
        if (player.grounded) {
          player.vy = player.jump;
          player.grounded = false;
        }
      }
    });

    function gameLoop() {
      update();
      draw();
      requestAnimationFrame(gameLoop);
    }

    gameLoop();
  </script>
</body>
</html>
